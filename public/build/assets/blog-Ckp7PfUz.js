import{a as m}from"./axios-B4uVmeYG.js";import{f as D}from"./utils-DPqQJ3U5.js";import{c as B}from"./alert-maf5A8O9.js";import{T as _,c as q,d as P,f as M,i as R,r as $,s as F,o as N,I as O,m as j,a as J,P as U}from"./image-CZRH7lL6.js";/* empty css              */window.addEventListener("load",()=>{const T=document.getElementById("blog-index"),y=document.getElementById("blog-create"),f=document.getElementById("blog-edit");let E={};if(T){let n=document.querySelectorAll("[data-copy-link]"),a=document.querySelectorAll("[data-btn-post-del]");n.length>0&&n.forEach(e=>{e.addEventListener("click",function(o){o.preventDefault(),w(e)})}),a&&a.forEach(e=>{e.addEventListener("click",o=>{const d=e.getAttribute("data-btn-post-del");o.preventDefault(),B("Vous êtes sur le point de supprimer un article, êtes-vous sûr(e) ?","default",function(i){i?(console.log(i),m.delete(d).then(function(s){s.data.status=="success"&&(window.location=s.data.redirectRoute)}).catch(function(s){console.log(s),Toast.danger("Il y a eu une erreur dans le processus de suppression de l'article, merci de réessayer après avoir rafraichi votre navigateur.")})):console.log("Suppression annulée !")})})})}if(y||f){let C=function(t,b){const p=document.getElementById("categories-list"),l=document.createElement("div");l.innerHTML=`<div class="form-control" x-show="true">
                        <label for="${t}" class="label cursor-pointer gap-2 justify-start">
                            <input type="checkbox" id="${t}" name="${t}" value="${b}" class="checkbox checkbox-primary checkbox-sm" checked="checked">
                            <span class="label-text">${t}</span>
                        </label>
                    </div>`,p.prepend(l.firstElementChild),n.classList.remove("hidden"),a.classList.add("hidden")};const n=document.getElementById("add-categorie"),a=document.getElementById("add-categorie-input-container"),e=document.getElementById("add-categorie-input"),o=document.getElementById("add-categorie-submit-btn"),d=document.getElementById("add-categorie-cancel-btn"),i=document.getElementById("published_at_select_date"),s=document.getElementById("published_at_input"),g=document.getElementById("published_at_input_container"),v=document.getElementById("published_at_input_submit_btn"),I=document.getElementById("published_at_input_cancel_btn"),k=document.getElementById("published_at_text"),h=document.getElementById("published_at");n.addEventListener("click",function(t){t.preventDefault(),this.classList.add("hidden"),a.classList.remove("hidden")}),o.addEventListener("click",function(t){t.preventDefault();const b=o.getAttribute("data-submit-url"),p=e.value;m.post(b,{name:p}).then(function(l){l.data.status=="success"&&(C(p,l.data.categoryId),Toast.success(l.data.message),e.value="")}).catch(function(l){Toast.danger(l.response.data.message)})}),d.addEventListener("click",function(t){t.preventDefault(),n.classList.remove("hidden"),a.classList.add("hidden")}),s.addEventListener("input",D),i.addEventListener("click",function(){g.classList.remove("hidden")}),v.addEventListener("click",function(t){t.preventDefault(),g.classList.add("hidden"),h.value=s.value,k.innerText="Publier le "+s.value}),I.addEventListener("click",function(t){t.preventDefault(),g.classList.add("hidden")})}if(f){const n=f.getAttribute("data-post-id"),a=document.querySelector("[data-btn-post-del]");(async function(e){try{let o=window.location.origin+"/admin/blog/post/get-data-editor/"+n;E=(await m.get(o,{params:{postId:n}})).data,L(E,n)}catch(o){throw console.error("Erreur lors de la requête au serveur :",o.message),o}})(),a.addEventListener("click",function(e){e.preventDefault();const o=this.getAttribute("data-btn-post-del");B("Vous êtes sur le point de supprimer un article, êtes-vous sûr(e) ?","default",function(d){d?(console.log(d),m.delete(o).then(function(i){i.data.status=="success"&&(window.location=i.data.redirectRoute)}).catch(function(i){console.log(i),Toast.danger("Il y a eu une erreur dans le processus de suppression de l'article, merci de réessayer après avoir rafraichi votre navigateur.")})):console.log("Suppression annulée !")})})}y&&(console.log("blogCreate"),L(E));function L(n,a){let e=n.length?JSON.parse(n):{},o=document.getElementById("title"),d=document.getElementById("excerpt"),i=document.getElementById("slug"),s,g=document.getElementById("thumbnail");const v=document.getElementById("btn-submit-post"),I=new _({holder:"editor",readOnly:!1,placeholder:"Tout est bon à dire du moment que c'est fait avec le coeur",tools:{header:q,list:P,checklist:M,quote:R,warning:$,marker:F,delimiter:N,linkTool:O,embed:j,table:J,image:{class:U,config:{endpoints:{byFile:"http://localhost:8008/uploadFile",byUrl:"http://localhost:8008/fetchUrl"}}}},data:e.length?JSON.parse(e):{},i18n:{messages:{ui:{Search:"Rechercher",popover:{Filter:"Filtrer","Convert to":"Convertir en"},blockTunes:{toggler:{"Click to tune":"Cliquer pour valider","or drag to move":"ou le faire glisser pour le déplacer"}},inlineToolbar:{converter:{"Convert to":"Convertir en"}},toolbar:{toolbox:{Add:"Ajouter"}}},toolNames:{Text:"Paragraphe",Heading:"Titre",List:"Liste",Warning:"Alerte",Checklist:"Checklist",Quote:"Citation",Delimiter:"Séparation",Table:"Tableau",Link:"Lien",Marker:"Marqueur",Bold:"Gras",Italic:"Italic"},tools:{warning:{Title:"Titre",Message:"Message"},link:{"Add a link":"Ajouter un lien"},stub:{"The block can not be displayed correctly.":"Le block ne peut pas s'afficher correctement."}},blockTunes:{delete:{Delete:"Supprimer","Click to delete":"Confirmer"},moveUp:{"Move up":"Monter d'un cran"},moveDown:{"Move down":"Descendre d'un cran"}}}}});v&&v.addEventListener("click",function(k){k.preventDefault(),I.save().then(h=>{const C=o.value,t=d.value,b=i.value;s=h;const p=g.files[0],l=document.querySelector('input[name="status"]:checked').value,x=document.querySelectorAll('#categories-list input[type="checkbox"]:checked'),A=Array.from(x).map(u=>u.value),S=document.querySelector('input[name="published_at"]:checked').value,c=new FormData;if(c.append("title",C),c.append("excerpt",t),c.append("slug",b),c.append("content",JSON.stringify(s)),c.append("thumbnail",p),c.append("status",l),c.append("publishedAt",S),A.forEach((u,r)=>{c.append("categories[]",u)}),y){let u=window.location.origin+"/admin/blog/post/store";m.post(u,c,{headers:{"Content-Type":"multipart/form-data"}}).then(function(r){r.data.status=="success"&&(window.location=r.data.redirectRoute)}).catch(function(r){Toast.danger(r.response.data.message)})}if(f){let u=window.location.origin+"/admin/blog/post/update/"+a;m.post(u,c,{headers:{"Content-Type":"multipart/form-data"}}).then(function(r){r.data.status=="success"&&(window.location=r.data.redirectRoute)}).catch(function(r){Toast.danger(r.response.data.message)})}}).catch(h=>{console.log("Saving failed: ",h)})})}function w(n){const a=n.getAttribute("data-copy-link");navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(a).then(()=>{alert("Le texte a bien été copié dans le presse-papiers : "+a)}).catch(e=>{console.error("Erreur lors de la copie du texte : ",e)}):(console.error("L'API Clipboard n'est pas supportée par ce navigateur."),alert("Votre navigateur ne supporte pas l'API Clipboard."))}});
