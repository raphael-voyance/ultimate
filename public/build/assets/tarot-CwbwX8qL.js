import{g as v}from"./index-DjKJqAo0.js";import{a as qe}from"./axios-C8DqakIB.js";document.addEventListener("DOMContentLoaded",()=>{const G=document.getElementById("drawing-cards");if(G){let ie=function(){oe.textContent=de[M]},$=function(){window.scrollTo({top:0,behavior:"smooth"}),M<Object.keys(de).length&&(M++,M<=4&&ie()),M>4&&O==!1&&(oe.classList.add("hidden"),Te.classList.remove("hidden"),re.classList.remove("hidden"))},A=window.location.hash;const R=document.getElementById("header-drawing-cards"),se=document.getElementById("footer-drawing-cards"),Y=document.getElementById("name-of-drawing-cards"),q=document.getElementById("total-cards-for-drawing-cards"),C=document.getElementById("tarot-cards"),ce=document.getElementById("select-drawing-card-el"),S=document.getElementById("card_map"),me=document.querySelectorAll("[data-to-step]"),pe=document.getElementById("btn-step-drawing-card"),H=document.getElementById("interpretation_drawing_card"),_=document.getElementById("spread-btn"),K=document.getElementById("shuffle-btn"),W=document.getElementById("cut-btn");let T=JSON.parse(C.getAttribute("data-cards"));const V=JSON.parse(C.getAttribute("data-games"));let z;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?z=!0:z=!1;let D,x;z?(D=63.08,x=120):(D=114,x=216.83);let Q=!1,N,E=0,F,U,O=!1,B=[],X=[],Z={};const ue=[document.getElementById("sticky-header"),document.getElementById("sub-header")],he=document.getElementById("footer");let ee=0;ue.forEach(e=>{ee+=Number(e.offsetHeight)});let we=Number(he.offsetHeight);G.style.minHeight=`calc(100vh - ${ee}px - ${we}px)`,function(){V.forEach(e=>{let t=document.createElement("li");t.setAttribute("data-total-cards",e.totalSelectedCards),t.classList="text-center cursor-pointer transition-all hover:scale-105";let n=e.name,o=document.createElement("h4");o.textContent=n;let a=e.description,r=document.createElement("p");r.textContent=a,o.classList="bg-accent/65",r.classList="bg-[#2800ff78] px-2",t.append(o),t.append(r),ce.append(t),t.addEventListener("click",()=>{document.querySelectorAll("[data-total-cards]").forEach(m=>{m.classList.remove("scale-105")}),t.classList.add("scale-105"),pe.classList.remove("hidden"),N=e.totalSelectedCards,F=n,U=e.slug,A=e.slug,Y.innerText=F,q.innerText=`Vous avez sélectionné ${E} carte${E>1?"s":""} sur ${N}`})})}();const te=function(e=null,t=null){window.scrollTo({top:0,behavior:"smooth"});const n=document.querySelectorAll("[data-step]");let o="DRAWING_CARD_INTRO",a=document.querySelector('[data-step="'+o+'"]');if(t!=null?(o=t,a=document.querySelector('[data-step="'+o+'"]'),n.forEach(r=>{r.classList.add("hidden")}),a.classList.remove("hidden")):(o=e.getAttribute("data-to-step"),a=document.querySelector('[data-step="'+o+'"]'),n.forEach(r=>{r.classList.add("hidden")}),a.classList.remove("hidden")),o=="DRAWING_CARD"){R.classList.remove("hidden"),se.classList.remove("hidden"),Q||ne(T,C);let r=document.createElement("div"),l=document.createElement("ul"),m=document.createElement("span");V.filter(s=>s.slug!=A).forEach(s=>{let d=document.createElement("li"),i=document.createElement("a"),c=window.location.origin,p=window.location.pathname,h="#"+s.slug,g=c+p;i.setAttribute("href",g+h),i.innerText=s.name,i.classList.add("btn","md:btn-sm","btn-primary","text-white/70","hover:text-white/70","active:text-white/70","focus:text-white/70"),d.append(i),l.append(d),i.addEventListener("click",function(k){k.preventDefault(),window.location.hash=h,location.reload()})}),m.innerText="Changer de tirage :",r.classList.add("p-4","bg-base-100","absolute","bottom-0","translate-y-full","w-full"),m.classList.add("text-xl","mb-3","inline-block"),l.classList.add("flex","gap-4","flex-wrap"),r.append(m),r.append(l),G.append(r)}else R.classList.add("hidden")},ne=function(e,t){Q=!0,E=0,e.forEach((n,o)=>{let a=document.createElement("li"),r=document.createElement("div"),l=document.createElement("div");a.setAttribute("id","tarot-card-"+n.slug+"-"+n.id),a.setAttribute("data-number",n.numberArcane),a.classList.add("tarot-card"),r.classList.add("front-card"),l.classList.add("back-card"),a.style.width=D+"px",a.style.height=x+"px",t.style.width=D+"px",t.style.height=x+"px",r.innerHTML=`<img class="w-full h-full object-contain" src="${n.imgPath}"/>`,l.innerHTML='<img class="w-full h-full object-contain" src=" '+window.location.origin+'/imgs/tarot/back-card.png"/>',a.appendChild(l),a.appendChild(r),t.appendChild(a),ye(a)})},Ce=function(){q.classList.remove("hidden");const e=C.getElementsByClassName("tarot-card"),t=e.length,n=360/t,o=z?100:180;for(let a=0;a<t;a++){const r=a*n,l=o*Math.cos(r*(Math.PI/180)),m=o*Math.sin(r*(Math.PI/180));e[a].style.transform=`translate(${l}px, ${m}px) rotate(${r+a*2}deg)`,e[a].addEventListener("mouseenter",()=>{e[a].style.transform=`translate(${l}px, ${m}px) rotate(${r+a*2}deg) scale(1.10)`}),e[a].addEventListener("mouseleave",()=>{e[a].style.transform=`translate(${l}px, ${m}px) rotate(${r+a*2}deg) scale(1)`})}C.classList.toggle("spread"),O=!0,_.classList.add("hidden"),q.parentElement.classList.remove("hidden"),$()},ge=function(){C.innerHTML="",E=0,T=v.utils.shuffle(T),ne(T,C),B=[],q.innerText=`Vous avez sélectionné ${E} carte${E>1?"s":""} sur ${N}`;let e=document.querySelectorAll(".tarot-card");e.forEach((t,n)=>{v.to(t,{duration:.8,x:()=>v.utils.random(-260,260),y:()=>v.utils.random(-160,160),rotation:()=>v.utils.random(-120,120),stagger:0,ease:"power1-inOut",onComplete:()=>{v.to(e,{duration:.8,y:0,x:0,rotation:0,stagger:0,ease:"power1.inOut"}),K.classList.add("hidden"),W.classList.remove("hidden"),W.addEventListener("click",Ee)}})}),$()},Ee=function(){let t=C.children[1],n=Math.floor(Math.random()*22);T[n].id==T[0].id&&(n=Math.floor(Math.random()*22)),X=["cut",T[n].id,T[0].id],Array.from(t.classList).find(o=>o.startsWith("-translate-x-")),t.classList.add("transition-all"),t.classList.add("!translate-x-[105%]"),t.classList.add("z-10"),setTimeout(function(o){t.classList.remove("!translate-x-[105%]"),t.classList.remove("z-10"),setTimeout(function(){t.classList.remove("transition-all")},100)},500),W.classList.add("hidden"),_.classList.remove("hidden"),_.addEventListener("click",Ce),$()},fe=function(){document.querySelectorAll(".tarot-card").forEach(t=>{v.to(t,{duration:1,x:()=>0,y:()=>0,rotation:()=>0,stagger:.2,ease:"power1.inOut"})})},ye=function(e){e.addEventListener("click",function(){let t=e.getAttribute("id").split("-").pop(),n=B.find(o=>o==t);O&&(e.classList.add("selected","ring-2","ring-primary"),B.push(parseInt(t))),e.classList.contains("selected")&&n==t&&(e.classList.remove("selected","ring-2","ring-primary"),B=B.filter(o=>o!=t),O=!0),be()})},be=function(){B.length==N?(O=!1,H.classList.remove("hidden")):(O=!0,H.classList.add("hidden")),E=B.length,q.innerText=`Vous avez sélectionné ${E} carte${E>1?"s":""} sur ${N}`},Le=async()=>{try{const e=await ae(B,U),t=await ae(X,"cut"),n=e.data,a={cut:t.data,draw:n};H.classList.add("hidden"),fe(),$(),Z=a;let r=n.drawSlug;r=="tirage-de-la-journee"?Se(a):r=="tirage-de-l-annee"?ke(a):r=="tirage-en-croix"?ve(a):xe(a);return}catch(e){console.error("Erreur lors de l'interprétation du tirage :",e)}},ae=async(e,t)=>{try{let n=window.location.origin+"/tarot/interpretation";return qe({method:"get",url:n,params:{drawCards:e,drawSlug:t}})}catch(n){throw console.error("Erreur lors de la requête au serveur :",n.message),n}};H.addEventListener("click",()=>{q.style.display="none",$(),Le()});const J=function(e){const t=e.draw,n=document.getElementById("draw-interpretation-block-cut").content,o=document.getElementById("cut-interpretation-card").content;let r=document.importNode(n,!0).querySelector(".tarot-cards-container"),l=r.querySelector(".block-interpretation"),m=document.createElement("div");console.log(l),Object.entries(t).forEach(([u,s])=>{if(!s.name)return;let d=document.importNode(o,!0),i=document.createElement("div"),c=document.createElement("h4"),p=document.createElement("span"),h=document.createElement("span"),g=document.createElement("p");d.querySelector(".card-img").setAttribute("src",s.path),d.querySelector(".tarot-card").style.width=D+"px",d.querySelector(".tarot-card").style.height=x+"px",h.innerText=s.nbArcane+" - ",p.innerText=s.name,c.appendChild(h),c.appendChild(p),g.innerText=s.interpretation,i.appendChild(c),i.appendChild(g),l.appendChild(i),m.appendChild(d)}),m.classList.add("block-cards-cut"),r.appendChild(m),S.firstElementChild.appendChild(r)},ve=function(e){console.log("process draw",e),v.to(C,{duration:1,scale:.8,opacity:0,ease:"power1.out",onComplete:()=>{setTimeout(()=>{C.remove(),S.classList.add("draw-cross"),J(e.cut);const n=e.draw.draw,o=document.getElementById("draw-interpretation-block-draw-cross").content,a=document.getElementById("draw-interpretation-card-draw-cross").content;let l=document.importNode(o,!0).querySelector(".tarot-cards-container"),m=l.querySelector(".block-interpretation"),u=document.createElement("div"),s=[];if(n.drawPositions)try{s=JSON.parse(JSON.parse(n.drawPositions))}catch(d){console.error("Error parsing JSON: ",d)}console.log(s),Object.entries(n).forEach(([d,i])=>{if(!i.name)return;let c=document.importNode(a,!0),p=document.createElement("div"),h=document.createElement("h4"),g=document.createElement("span"),k=document.createElement("span"),I=document.createElement("p");c.querySelector(".card-img").setAttribute("src",i.path),c.querySelector(".tarot-card").style.width=D+"px",c.querySelector(".tarot-card").style.height=x+"px",k.innerText=i.nbArcane+" - ",g.innerText=i.name,h.appendChild(k),h.appendChild(g),I.innerText=i.interpretation;let w=document.createElement("div"),f=document.createElement("span"),y=document.createElement("span"),b=document.createElement("span");w.classList.add("domaine"),f.classList.add("draw-domaine-icone"),y.classList.add("draw-domaine-text"),b.classList.add("draw-domaine-position");const L=s.find(P=>P.position===parseInt(d)+1);L&&(b.innerHTML=parseInt(d)+1,f.innerHTML=`<i class="${L.icone}"></i>`,y.innerText=L.keywords,w.appendChild(b),w.appendChild(y),w.appendChild(f),p.appendChild(w)),p.appendChild(h),p.appendChild(I),m.appendChild(p),u.appendChild(c)}),u.style.minHeight=x*3+"px",u.classList.add("block-cards-draw"),l.appendChild(u),S.firstElementChild.appendChild(l)},500)}})},xe=function(e){console.log("process draw",e),v.to(C,{duration:1,scale:.8,opacity:0,ease:"power1.out",onComplete:()=>{setTimeout(()=>{C.remove(),S.classList.add("draw-spread"),J(e.cut);const n=e.draw.draw,o=document.getElementById("draw-interpretation-block-draw-spread").content,a=document.getElementById("draw-interpretation-card-draw-spread").content;let l=document.importNode(o,!0).querySelector(".tarot-cards-container"),m=l.querySelector(".block-interpretation"),u=document.createElement("div"),s=[];if(n.drawPositions)try{s=JSON.parse(JSON.parse(n.drawPositions))}catch(d){console.error("Error parsing JSON: ",d)}console.log(s),Object.entries(n).forEach(([d,i])=>{if(!i.name)return;let c=document.importNode(a,!0),p=document.createElement("div"),h=document.createElement("h4"),g=document.createElement("span"),k=document.createElement("span"),I=document.createElement("p");c.querySelector(".card-img").setAttribute("src",i.path),c.querySelector(".tarot-card").style.width=D+"px",c.querySelector(".tarot-card").style.height=x+"px",k.innerText=i.nbArcane+" - ",g.innerText=i.name,h.appendChild(k),h.appendChild(g),I.innerText=i.interpretation;let w=document.createElement("div"),f=document.createElement("span"),y=document.createElement("span"),b=document.createElement("span");w.classList.add("domaine"),f.classList.add("draw-domaine-icone"),y.classList.add("draw-domaine-text"),b.classList.add("draw-domaine-position");const L=s.find(P=>P.position===parseInt(d)+1);L&&(b.innerHTML=parseInt(d)+1,f.innerHTML=`<i class="${L.icone}"></i>`,y.innerText=L.keywords,w.appendChild(b),w.appendChild(y),w.appendChild(f),p.appendChild(w)),p.appendChild(h),p.appendChild(I),m.appendChild(p),u.appendChild(c)}),u.style.minHeight=x*3+"px",u.classList.add("block-cards-draw"),l.appendChild(u),S.firstElementChild.appendChild(l)},500)}})},ke=function(e){v.to(C,{duration:1,scale:.8,opacity:0,ease:"power1.out",onComplete:()=>{setTimeout(()=>{C.remove(),S.classList.add("draw-year"),J(e.cut);const n=e.draw.draw,o=document.getElementById("draw-interpretation-block-draw-year").content,a=document.getElementById("draw-interpretation-card-draw-year").content;let l=document.importNode(o,!0).querySelector(".tarot-cards-container");const m=JSON.parse(JSON.parse(n.drawPositions));Object.entries(n).forEach(([u,s])=>{if(!s.name)return;let d=document.importNode(a,!0);d.querySelector(".block-card-year .card-img").setAttribute("src",s.path),d.querySelector(".card-nb").innerText=s.nbArcane+" - ",d.querySelector(".card-name").innerText=s.name,d.querySelector(".card-interpretation-text").innerText=s.interpretation;const i=m.find(c=>c.position===parseInt(u)+1);i?(d.querySelector(".draw-domaine-icone").innerHTML=`<i class="${i.icone}"></i>`,d.querySelector(".draw-domaine-text").innerText=i.keywords):(d.querySelector(".draw-domaine-icone").innerHTML='<i class="fa-thin fa-t-rex"></i>',d.querySelector(".draw-domaine-text").innerText="Général"),l.appendChild(d)}),S.firstElementChild.appendChild(l)},500)}})},Se=function(e){v.to(C,{duration:1,scale:.8,opacity:0,ease:"power1.out",onComplete:()=>{setTimeout(()=>{C.remove(),S.classList.add("draw-day"),J(e.cut);const n=e.draw.draw,o=document.getElementById("draw-interpretation-block-draw-day").content,a=document.getElementById("draw-interpretation-card-draw-day").content;let l=document.importNode(o,!0).querySelector(".tarot-cards-container"),m=l.querySelector(".block-interpretation"),u=document.createElement("div"),s=[];if(n.drawPositions)try{s=JSON.parse(JSON.parse(n.drawPositions))}catch(d){console.error("Error parsing JSON: ",d)}console.log(s),Object.entries(n).forEach(([d,i])=>{if(!i.name)return;let c=document.importNode(a,!0),p=document.createElement("div"),h=document.createElement("h4"),g=document.createElement("span"),k=document.createElement("span"),I=document.createElement("p");c.querySelector(".card-img").setAttribute("src",i.path),c.querySelector(".tarot-card").style.width=D+"px",c.querySelector(".tarot-card").style.height=x+"px",k.innerText=i.nbArcane+" - ",g.innerText=i.name,h.appendChild(k),h.appendChild(g),I.innerText=i.interpretation;let w=document.createElement("div"),f=document.createElement("span"),y=document.createElement("span"),b=document.createElement("span");w.classList.add("domaine"),f.classList.add("draw-domaine-icone"),y.classList.add("draw-domaine-text"),b.classList.add("draw-domaine-position");const L=s.find(P=>P.position===parseInt(d)+1);L&&(b.innerHTML=parseInt(d)+1,f.innerHTML=`<i class="${L.icone}"></i>`,y.innerText=L.keywords,w.appendChild(b),w.appendChild(y),w.appendChild(f),p.appendChild(w)),p.appendChild(h),p.appendChild(I),m.appendChild(p),u.appendChild(c)}),u.classList.add("block-cards-draw"),l.appendChild(u),S.firstElementChild.appendChild(l)},500)}})};let re=document.getElementById("date-of-drawing-cards"),j=new Date;j=j.toLocaleDateString(),re.innerText="Le : "+j;let M=0,oe=document.getElementById("notice-of-drawing-cards"),Te=document.getElementById("draw-actions"),de={0:'Faites le vide dans votre esprit et respirez tranquillement trois fois puis mélangez les cartes en cliquant sur le bouton "Mélanger"',1:'Parfait, maintenant, concentrez-vous sur votre question puis coupez les cartes en cliquant sur le bouton "Couper"',2:'Maintenant, étalez le jeu en cliquant sur le bouton "Etaler"',3:"Parmis les cartes qui se présentent à vous, sélectionnez celles qui vous inspirent en cliquant sur chacune d'elles, vous pouvez en changer, mais sachez que votre première intuition est souvent la bonne, restez léger.",4:'Bien, maintenant que vous avez sélectionné toutes vos cartes pour votre tirage, cliquez sur le bouton "Interpréter mon tirage" pour obtenir votre interprétation.'};ie();const De=document.getElementById("save-draw"),le=document.getElementById("drawer-save"),Be=document.getElementById("drawer-save-close");De.addEventListener("click",e=>{e.preventDefault(),le.setAttribute("checked",!0),Ie(Z)}),Be.addEventListener("click",e=>{e.preventDefault(),le.removeAttribute("checked")});const Ie=function(e){e.date=j,console.log("save draw",e)};A&&(A=A.substring(1),V.forEach(e=>{e.slug==A&&(R.classList.remove("hidden"),te(null,"DRAWING_CARD"),N=e.totalSelectedCards,F=e.name,U=e.slug,Y.innerText=F,q.innerText=`Vous avez sélectionné ${E} carte${E>1?"s":""} sur ${N}`)})),me.forEach(e=>{e.addEventListener("click",()=>{te(e)})}),K.addEventListener("click",ge)}});
