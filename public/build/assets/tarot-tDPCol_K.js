import{g as x}from"./index-DjKJqAo0.js";import{a as ke}from"./axios-C8DqakIB.js";document.addEventListener("DOMContentLoaded",()=>{const j=document.getElementById("drawing-cards");if(j){let re=function(){ne.textContent=ae[M]},$=function(){M<Object.keys(ae).length&&(M++,re()),console.log("drawStep",M),M>4&&(ne.classList.add("hidden"),xe.classList.remove("hidden"))},A=window.location.hash;const G=document.getElementById("header-drawing-cards"),oe=document.getElementById("footer-drawing-cards"),U=document.getElementById("name-of-drawing-cards"),q=document.getElementById("total-cards-for-drawing-cards"),C=document.getElementById("tarot-cards"),ie=document.getElementById("select-drawing-card-el"),S=document.getElementById("card_map"),de=document.querySelectorAll("[data-to-step]"),le=document.getElementById("btn-step-drawing-card"),H=document.getElementById("interpretation_drawing_card"),R=document.getElementById("spread-btn"),Y=document.getElementById("shuffle-btn"),_=document.getElementById("cut-btn");let B=JSON.parse(C.getAttribute("data-cards"));const W=JSON.parse(C.getAttribute("data-games"));let z;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?z=!0:z=!1;let D,k;z?(D=63.08,k=120):(D=114,k=216.83);let K=!1,N,E=0,F,V,O=!1,T=[],Q=[];const se=[document.getElementById("sticky-header"),document.getElementById("sub-header")],ce=document.getElementById("footer");let X=0;se.forEach(e=>{X+=Number(e.offsetHeight)});let pe=Number(ce.offsetHeight);j.style.minHeight=`calc(100vh - ${X}px - ${pe}px)`,function(){W.forEach(e=>{let t=document.createElement("li");t.setAttribute("data-total-cards",e.totalSelectedCards),t.classList="text-center cursor-pointer transition-all hover:scale-105";let n=e.name,o=document.createElement("h4");o.textContent=n;let a=e.description,r=document.createElement("p");r.textContent=a,o.classList="bg-accent",r.classList="bg-secondary px-2",t.append(o),t.append(r),ie.append(t),t.addEventListener("click",()=>{document.querySelectorAll("[data-total-cards]").forEach(p=>{p.classList.remove("scale-105")}),t.classList.add("scale-105"),le.classList.remove("hidden"),N=e.totalSelectedCards,F=n,V=e.slug,A=e.slug,U.innerText=F,q.innerText=`Vous avez sélectionné ${E} carte${E>1?"s":""} sur ${N}`})})}();const Z=function(e=null,t=null){const n=document.querySelectorAll("[data-step]");let o="DRAWING_CARD_INTRO",a=document.querySelector('[data-step="'+o+'"]');if(t!=null?(o=t,a=document.querySelector('[data-step="'+o+'"]'),n.forEach(r=>{r.classList.add("hidden")}),a.classList.remove("hidden")):(o=e.getAttribute("data-to-step"),a=document.querySelector('[data-step="'+o+'"]'),n.forEach(r=>{r.classList.add("hidden")}),a.classList.remove("hidden")),o=="DRAWING_CARD"){G.classList.remove("hidden"),oe.classList.remove("hidden"),K||ee(B,C);let r=document.createElement("div"),l=document.createElement("ul"),p=document.createElement("span");W.filter(s=>s.slug!=A).forEach(s=>{let i=document.createElement("li"),d=document.createElement("a"),c=window.location.origin,m=window.location.pathname,h="#"+s.slug,g=c+m;d.setAttribute("href",g+h),d.innerText=s.name,d.classList.add("btn","md:btn-sm","btn-primary","text-white/70","hover:text-white/70","active:text-white/70","focus:text-white/70"),i.append(d),l.append(i),d.addEventListener("click",function(v){v.preventDefault(),window.location.hash=h,location.reload()})}),p.innerText="Changer de tirage :",r.classList.add("p-4","bg-base-100","absolute","bottom-0","translate-y-full","w-full"),p.classList.add("text-xl","mb-3","inline-block"),l.classList.add("flex","gap-4","flex-wrap"),r.append(p),r.append(l),j.append(r)}else G.classList.add("hidden")},ee=function(e,t){K=!0,E=0,e.forEach((n,o)=>{let a=document.createElement("li"),r=document.createElement("div"),l=document.createElement("div");a.setAttribute("id","tarot-card-"+n.slug+"-"+n.id),a.setAttribute("data-number",n.numberArcane),a.classList.add("tarot-card"),r.classList.add("front-card"),l.classList.add("back-card"),a.style.width=D+"px",a.style.height=k+"px",t.style.width=D+"px",t.style.height=k+"px",r.innerHTML=`<img class="w-full h-full object-contain" src="${n.imgPath}"/>`,l.innerHTML='<img class="w-full h-full object-contain" src=" '+window.location.origin+'/imgs/tarot/back-card.png"/>',a.appendChild(l),a.appendChild(r),t.appendChild(a),Ce(a)})},me=function(){q.classList.remove("hidden");const e=C.getElementsByClassName("tarot-card"),t=e.length,n=360/t,o=z?100:180;for(let a=0;a<t;a++){const r=a*n,l=o*Math.cos(r*(Math.PI/180)),p=o*Math.sin(r*(Math.PI/180));e[a].style.transform=`translate(${l}px, ${p}px) rotate(${r+a*2}deg)`,e[a].addEventListener("mouseenter",()=>{e[a].style.transform=`translate(${l}px, ${p}px) rotate(${r+a*2}deg) scale(1.10)`}),e[a].addEventListener("mouseleave",()=>{e[a].style.transform=`translate(${l}px, ${p}px) rotate(${r+a*2}deg) scale(1)`})}C.classList.toggle("spread"),O=!0,R.classList.add("hidden"),q.parentElement.classList.remove("hidden"),$()},ue=function(){C.innerHTML="",E=0,B=x.utils.shuffle(B),ee(B,C),T=[],q.innerText=`Vous avez sélectionné ${E} carte${E>1?"s":""} sur ${N}`;let e=document.querySelectorAll(".tarot-card");e.forEach((t,n)=>{x.to(t,{duration:.8,x:()=>x.utils.random(-260,260),y:()=>x.utils.random(-160,160),rotation:()=>x.utils.random(-120,120),stagger:0,ease:"power1-inOut",onComplete:()=>{x.to(e,{duration:.8,y:0,x:0,rotation:0,stagger:0,ease:"power1.inOut"}),Y.classList.add("hidden"),_.classList.remove("hidden"),_.addEventListener("click",he)}})}),$()},he=function(){let t=C.children[1],n=Math.floor(Math.random()*22);B[n].id==B[0].id&&(n=Math.floor(Math.random()*22)),Q=["cut",B[n].id,B[0].id],Array.from(t.classList).find(o=>o.startsWith("-translate-x-")),t.classList.add("transition-all"),t.classList.add("!translate-x-[105%]"),t.classList.add("z-10"),setTimeout(function(o){t.classList.remove("!translate-x-[105%]"),t.classList.remove("z-10"),setTimeout(function(){t.classList.remove("transition-all")},100)},500),_.classList.add("hidden"),R.classList.remove("hidden"),R.addEventListener("click",me),$()},we=function(){document.querySelectorAll(".tarot-card").forEach(t=>{x.to(t,{duration:1,x:()=>0,y:()=>0,rotation:()=>0,stagger:.2,ease:"power1.inOut"})})},Ce=function(e){e.addEventListener("click",function(){let t=e.getAttribute("id").split("-").pop(),n=T.find(o=>o==t);O&&(e.classList.add("selected","ring-2","ring-primary"),T.push(parseInt(t))),e.classList.contains("selected")&&n==t&&(e.classList.remove("selected","ring-2","ring-primary"),T=T.filter(o=>o!=t),O=!0,console.log(T,O)),ge()})},ge=function(){T.length==N?(O=!1,H.classList.remove("hidden"),$()):H.classList.add("hidden"),E=T.length,q.innerText=`Vous avez sélectionné ${E} carte${E>1?"s":""} sur ${N}`},Ee=async()=>{try{const e=await te(T,V),t=await te(Q,"cut"),n=e.data,a={cut:t.data,draw:n};H.classList.add("hidden"),we();let r=n.drawSlug;r=="tirage-de-la-journee"?Le(a):r=="tirage-de-l-annee"?be(a):r=="tirage-en-croix"?fe(a):ye(a);return}catch(e){console.error("Erreur lors de l'interprétation du tirage :",e)}},te=async(e,t)=>{try{let n=window.location.origin+"/tarot/interpretation";return ke({method:"get",url:n,params:{drawCards:e,drawSlug:t}})}catch(n){throw console.error("Erreur lors de la requête au serveur :",n.message),n}};H.addEventListener("click",()=>{q.style.display="none",$(),Ee()});const J=function(e){const t=e.draw,n=document.getElementById("draw-interpretation-block-cut").content,o=document.getElementById("cut-interpretation-card").content;let r=document.importNode(n,!0).querySelector(".tarot-cards-container"),l=r.querySelector(".block-interpretation"),p=document.createElement("div");console.log(l),Object.entries(t).forEach(([u,s])=>{if(!s.name)return;let i=document.importNode(o,!0),d=document.createElement("div"),c=document.createElement("h4"),m=document.createElement("span"),h=document.createElement("span"),g=document.createElement("p");i.querySelector(".card-img").setAttribute("src",s.path),i.querySelector(".tarot-card").style.width=D+"px",i.querySelector(".tarot-card").style.height=k+"px",h.innerText=s.nbArcane+" - ",m.innerText=s.name,c.appendChild(h),c.appendChild(m),g.innerText=s.interpretation,d.appendChild(c),d.appendChild(g),l.appendChild(d),p.appendChild(i)}),p.classList.add("block-cards-cut"),r.appendChild(p),S.firstElementChild.appendChild(r)},fe=function(e){console.log("process draw",e),x.to(C,{duration:1,scale:.8,opacity:0,ease:"power1.out",onComplete:()=>{setTimeout(()=>{C.remove(),S.classList.add("draw-cross"),J(e.cut);const n=e.draw.draw,o=document.getElementById("draw-interpretation-block-draw-cross").content,a=document.getElementById("draw-interpretation-card-draw-cross").content;let l=document.importNode(o,!0).querySelector(".tarot-cards-container"),p=l.querySelector(".block-interpretation"),u=document.createElement("div"),s=[];if(n.drawPositions)try{s=JSON.parse(JSON.parse(n.drawPositions))}catch(i){console.error("Error parsing JSON: ",i)}console.log(s),Object.entries(n).forEach(([i,d])=>{if(!d.name)return;let c=document.importNode(a,!0),m=document.createElement("div"),h=document.createElement("h4"),g=document.createElement("span"),v=document.createElement("span"),I=document.createElement("p");c.querySelector(".card-img").setAttribute("src",d.path),c.querySelector(".tarot-card").style.width=D+"px",c.querySelector(".tarot-card").style.height=k+"px",v.innerText=d.nbArcane+" - ",g.innerText=d.name,h.appendChild(v),h.appendChild(g),I.innerText=d.interpretation;let w=document.createElement("div"),f=document.createElement("span"),y=document.createElement("span"),b=document.createElement("span");w.classList.add("domaine"),f.classList.add("draw-domaine-icone"),y.classList.add("draw-domaine-text"),b.classList.add("draw-domaine-position");const L=s.find(P=>P.position===parseInt(i)+1);L&&(b.innerHTML=parseInt(i)+1,f.innerHTML=`<i class="${L.icone}"></i>`,y.innerText=L.keywords,w.appendChild(b),w.appendChild(y),w.appendChild(f),m.appendChild(w)),m.appendChild(h),m.appendChild(I),p.appendChild(m),u.appendChild(c)}),u.style.minHeight=k*3+"px",u.classList.add("block-cards-draw"),l.appendChild(u),S.firstElementChild.appendChild(l)},500)}})},ye=function(e){console.log("process draw",e),x.to(C,{duration:1,scale:.8,opacity:0,ease:"power1.out",onComplete:()=>{setTimeout(()=>{C.remove(),S.classList.add("draw-spread"),J(e.cut);const n=e.draw.draw,o=document.getElementById("draw-interpretation-block-draw-spread").content,a=document.getElementById("draw-interpretation-card-draw-spread").content;let l=document.importNode(o,!0).querySelector(".tarot-cards-container"),p=l.querySelector(".block-interpretation"),u=document.createElement("div"),s=[];if(n.drawPositions)try{s=JSON.parse(JSON.parse(n.drawPositions))}catch(i){console.error("Error parsing JSON: ",i)}console.log(s),Object.entries(n).forEach(([i,d])=>{if(!d.name)return;let c=document.importNode(a,!0),m=document.createElement("div"),h=document.createElement("h4"),g=document.createElement("span"),v=document.createElement("span"),I=document.createElement("p");c.querySelector(".card-img").setAttribute("src",d.path),c.querySelector(".tarot-card").style.width=D+"px",c.querySelector(".tarot-card").style.height=k+"px",v.innerText=d.nbArcane+" - ",g.innerText=d.name,h.appendChild(v),h.appendChild(g),I.innerText=d.interpretation;let w=document.createElement("div"),f=document.createElement("span"),y=document.createElement("span"),b=document.createElement("span");w.classList.add("domaine"),f.classList.add("draw-domaine-icone"),y.classList.add("draw-domaine-text"),b.classList.add("draw-domaine-position");const L=s.find(P=>P.position===parseInt(i)+1);L&&(b.innerHTML=parseInt(i)+1,f.innerHTML=`<i class="${L.icone}"></i>`,y.innerText=L.keywords,w.appendChild(b),w.appendChild(y),w.appendChild(f),m.appendChild(w)),m.appendChild(h),m.appendChild(I),p.appendChild(m),u.appendChild(c)}),u.style.minHeight=k*3+"px",u.classList.add("block-cards-draw"),l.appendChild(u),S.firstElementChild.appendChild(l)},500)}})},be=function(e){x.to(C,{duration:1,scale:.8,opacity:0,ease:"power1.out",onComplete:()=>{setTimeout(()=>{C.remove(),S.classList.add("draw-year"),J(e.cut);const n=e.draw.draw,o=document.getElementById("draw-interpretation-block-draw-year").content,a=document.getElementById("draw-interpretation-card-draw-year").content;let l=document.importNode(o,!0).querySelector(".tarot-cards-container");const p=JSON.parse(JSON.parse(n.drawPositions));Object.entries(n).forEach(([u,s])=>{if(!s.name)return;let i=document.importNode(a,!0);i.querySelector(".block-card-year .card-img").setAttribute("src",s.path),i.querySelector(".card-nb").innerText=s.nbArcane+" - ",i.querySelector(".card-name").innerText=s.name,i.querySelector(".card-interpretation-text").innerText=s.interpretation;const d=p.find(c=>c.position===parseInt(u)+1);d?(i.querySelector(".draw-domaine-icone").innerHTML=`<i class="${d.icone}"></i>`,i.querySelector(".draw-domaine-text").innerText=d.keywords):(i.querySelector(".draw-domaine-icone").innerHTML='<i class="fa-thin fa-t-rex"></i>',i.querySelector(".draw-domaine-text").innerText="Général"),l.appendChild(i)}),S.firstElementChild.appendChild(l)},500)}})},Le=function(e){x.to(C,{duration:1,scale:.8,opacity:0,ease:"power1.out",onComplete:()=>{setTimeout(()=>{C.remove(),S.classList.add("draw-day"),J(e.cut);const n=e.draw.draw,o=document.getElementById("draw-interpretation-block-draw-day").content,a=document.getElementById("draw-interpretation-card-draw-day").content;let l=document.importNode(o,!0).querySelector(".tarot-cards-container"),p=l.querySelector(".block-interpretation"),u=document.createElement("div"),s=[];if(n.drawPositions)try{s=JSON.parse(JSON.parse(n.drawPositions))}catch(i){console.error("Error parsing JSON: ",i)}console.log(s),Object.entries(n).forEach(([i,d])=>{if(!d.name)return;let c=document.importNode(a,!0),m=document.createElement("div"),h=document.createElement("h4"),g=document.createElement("span"),v=document.createElement("span"),I=document.createElement("p");c.querySelector(".card-img").setAttribute("src",d.path),c.querySelector(".tarot-card").style.width=D+"px",c.querySelector(".tarot-card").style.height=k+"px",v.innerText=d.nbArcane+" - ",g.innerText=d.name,h.appendChild(v),h.appendChild(g),I.innerText=d.interpretation;let w=document.createElement("div"),f=document.createElement("span"),y=document.createElement("span"),b=document.createElement("span");w.classList.add("domaine"),f.classList.add("draw-domaine-icone"),y.classList.add("draw-domaine-text"),b.classList.add("draw-domaine-position");const L=s.find(P=>P.position===parseInt(i)+1);L&&(b.innerHTML=parseInt(i)+1,f.innerHTML=`<i class="${L.icone}"></i>`,y.innerText=L.keywords,w.appendChild(b),w.appendChild(y),w.appendChild(f),m.appendChild(w)),m.appendChild(h),m.appendChild(I),p.appendChild(m),u.appendChild(c)}),u.classList.add("block-cards-draw"),l.appendChild(u),S.firstElementChild.appendChild(l)},500)}})};let M=0,ne=document.getElementById("notice-of-drawing-cards"),xe=document.getElementById("draw-actions"),ae={0:'Faites le vide dans votre esprit et respirez tranquillement trois fois puis mélangez les cartes en cliquant sur le bouton "Mélanger"',1:'Parfait, maintenant, concentrez-vous sur votre question puis coupez les cartes en cliquant sur le bouton "Couper"',2:'Maintenant, étalez le jeu en cliquant sur le bouton "Etaler"',3:"Parmis les cartes qui se présentent à vous, sélectionnez celles qui vous inspirent en cliquant sur chacune d'elles, vous pouvez en changer, mais sachez que votre première intuition est souvent la bonne, restez léger.",4:'Bien, maintenant que vous avez sélectionné toutes vos cartes pour votre tirage, cliquez sur le bouton "Interpréter mon tirage" pour obtenir votre interprétation.'};re(),A&&(A=A.substring(1),W.forEach(e=>{e.slug==A&&(G.classList.remove("hidden"),Z(null,"DRAWING_CARD"),N=e.totalSelectedCards,F=e.name,V=e.slug,U.innerText=F,q.innerText=`Vous avez sélectionné ${E} carte${E>1?"s":""} sur ${N}`)})),de.forEach(e=>{e.addEventListener("click",()=>{Z(e)})}),Y.addEventListener("click",ue)}});
